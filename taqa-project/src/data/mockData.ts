import { Anomaly, MaintenanceWindow, DashboardMetrics } from '../types';
import { generateId } from '../lib/utils';

export const mockAnomalies: Anomaly[] = [
  {
    id: generateId(),
    title: 'Vibration excessive sur pompe centrifuge P-101',
    description: 'Vibrations anormales détectées sur la pompe centrifuge P-101 du circuit de refroidissement principal. Amplitude dépassant les limites acceptables.',
    equipmentId: 'P-101',
    service: 'Production',
    responsiblePerson: 'Ahmed Bennani',
    status: 'in_progress',
    originSource: 'Inspection préventive',
    createdAt: new Date('2025-01-10T08:30:00'),
    updatedAt: new Date('2025-01-12T14:20:00'),
    fiabiliteIntegriteScore: 4.0, // Combined (3.8 + 4.1)/2 = 3.95 ≈ 4.0/5
    disponibiliteScore: 3.4, // Already /5
    processSafetyScore: 4.0, // Already /5
    criticalityLevel: 'critical', // 4.0 + 3.4 + 4.0 = 11.4 (>9)
    estimatedHours: 16,
    priority: 1,
    maintenanceWindowId: 'mw-1',
    hasActionPlan: true,
    actionPlan: {
      id: 'plan-1',
      anomalyId: 'anomaly-1',
      needsOutage: true,
      outageType: 'minor',
      outageDuration: 3,
      actions: [
        {
          id: 'action-1',
          action: 'Remplacement roulement',
          responsable: 'MC',
          pdrsDisponible: 'OUI',
          ressourcesInternes: '1 mécanicien',
          ressourcesExternes: '1 chaudronnier',
          statut: 'en_cours',
          dureeHeures: 8,
          dureeJours: 1
        }
      ],
      totalDurationHours: 8,
      totalDurationDays: 1,
      estimatedCost: 5000,
      priority: 1,
      comments: 'Intervention urgente requise',
      createdAt: new Date('2025-01-10T08:30:00'),
      updatedAt: new Date('2025-01-12T14:20:00'),
      status: 'in_progress',
      completionPercentage: 60
    }
  },
  {
    id: generateId(),
    title: 'Fuite huile sur réducteur R-205',
    description: 'Fuite d\'huile constatée au niveau du joint d\'étanchéité du réducteur R-205. Risque de contamination environnementale.',
    equipmentId: 'R-205',
    service: 'Maintenance',
    responsiblePerson: 'Fatima Zahra',
    status: 'new',
    originSource: 'Rapport opérateur',
    createdAt: new Date('2025-01-11T10:15:00'),
    updatedAt: new Date('2025-01-11T10:15:00'),
    fiabiliteIntegriteScore: 3.1,
    disponibiliteScore: 2.8,
    processSafetyScore: 4.3,
    criticalityLevel: 'critical', // 3.1 + 2.8 + 4.3 = 10.2 (>9)
    estimatedHours: 8,
    priority: 2,
  },
  {
    id: generateId(),
    title: 'Défaillance capteur température T-301',
    description: 'Le capteur de température T-301 affiche des valeurs erronées. Impact sur la régulation automatique du processus.',
    equipmentId: 'T-301',
    service: 'Instrumentation',
    responsiblePerson: 'Youssef Alami',
    status: 'treated',
    originSource: 'Système de monitoring',
    createdAt: new Date('2025-01-08T16:45:00'),
    updatedAt: new Date('2025-01-10T09:30:00'),
    fiabiliteIntegriteScore: 2.9,
    disponibiliteScore: 3.6,
    processSafetyScore: 3.4,
    criticalityLevel: 'critical', // 2.9 + 3.6 + 3.4 = 9.9 (>9)
    estimatedHours: 4,
    priority: 3,
  },
  {
    id: generateId(),
    title: 'Corrosion avancée sur canalisation C-402',
    description: 'Corrosion externe importante détectée sur la canalisation C-402. Risque de rupture et arrêt production.',
    equipmentId: 'C-402',
    service: 'Intégrité',
    responsiblePerson: 'Omar Tazi',
    status: 'new',
    originSource: 'Inspection NDT',
    createdAt: new Date('2025-01-12T11:20:00'),
    updatedAt: new Date('2025-01-12T11:20:00'),
    fiabiliteIntegriteScore: 4.5,
    disponibiliteScore: 4.3,
    processSafetyScore: 4.6,
    criticalityLevel: 'critical',
    estimatedHours: 32,
    priority: 1,
  },
  {
    id: generateId(),
    title: 'Usure roulement sur ventilateur V-103',
    description: 'Usure prématurée du roulement côté accouplement du ventilateur V-103. Bruit anormal et échauffement.',
    equipmentId: 'V-103',
    service: 'Utilités',
    responsiblePerson: 'Laila Mansouri',
    status: 'closed',
    originSource: 'Maintenance préventive',
    createdAt: new Date('2025-01-05T14:10:00'),
    updatedAt: new Date('2025-01-09T16:45:00'),
    fiabiliteIntegriteScore: 2.3,
    disponibiliteScore: 2.4,
    processSafetyScore: 2.0,
    criticalityLevel: 'medium',
    estimatedHours: 12,
    priority: 4,
  },
  // Add more treated anomalies for testing intelligent planning
  {
    id: generateId(),
    title: 'Usure excessive palier moteur M-501',
    description: 'Usure anormale détectée sur le palier principal du moteur M-501. Vibrations et bruit de fonctionnement augmentés.',
    equipmentId: 'M-501',
    service: 'Maintenance',
    responsiblePerson: 'Kamal Benjelloun',
    status: 'treated',
    originSource: 'Analyse vibratoire',
    createdAt: new Date('2025-01-09T14:20:00'),
    updatedAt: new Date('2025-01-11T16:45:00'),
    fiabiliteIntegriteScore: 2.8,
    disponibiliteScore: 2.5,
    processSafetyScore: 3.8,
    criticalityLevel: 'high',
    estimatedHours: 12,
    priority: 2,
  },
  {
    id: generateId(),
    title: 'Dysfonctionnement vanne V-203',
    description: 'La vanne V-203 ne se ferme pas complètement. Fuite interne détectée lors du test d\'étanchéité.',
    equipmentId: 'V-203',
    service: 'Instrumentation',
    responsiblePerson: 'Nadia Alaoui',
    status: 'treated',
    originSource: 'Test périodique',
    createdAt: new Date('2025-01-07T09:30:00'),
    updatedAt: new Date('2025-01-09T11:15:00'),
    fiabiliteIntegriteScore: 3.5,
    disponibiliteScore: 3.8,
    processSafetyScore: 4.2,
    criticalityLevel: 'medium',
    estimatedHours: 6,
    priority: 3,
  },
  {
    id: generateId(),
    title: 'Surchauffe compresseur C-401',
    description: 'Température de fonctionnement du compresseur C-401 dépassant les limites. Problème de refroidissement suspecté.',
    equipmentId: 'C-401',
    service: 'Production',
    responsiblePerson: 'Rachid Essaid',
    status: 'treated',
    originSource: 'Alarme système',
    createdAt: new Date('2025-01-05T16:00:00'),
    updatedAt: new Date('2025-01-08T10:30:00'),
    fiabiliteIntegriteScore: 2.4,
    disponibiliteScore: 2.2,
    processSafetyScore: 4.5,
    criticalityLevel: 'critical',
    estimatedHours: 24,
    priority: 1,
  },
  {
    id: generateId(),
    title: 'Étalonnage transmetteur pression PT-102',
    description: 'Dérive de l\'étalonnage du transmetteur de pression PT-102. Lectures incorrectes affectant la régulation.',
    equipmentId: 'PT-102',
    service: 'Instrumentation',
    responsiblePerson: 'Aicha Benali',
    status: 'treated',
    originSource: 'Vérification périodique',
    createdAt: new Date('2025-01-06T11:45:00'),
    updatedAt: new Date('2025-01-08T14:20:00'),
    fiabiliteIntegriteScore: 3.7,
    disponibiliteScore: 3.9,
    processSafetyScore: 3.6,
    criticalityLevel: 'medium',
    estimatedHours: 4,
    priority: 4,
  },
  {
    id: generateId(),
    title: 'Fissure structure support S-301',
    description: 'Fissure détectée sur la structure de support S-301. Risque d\'effondrement si non traitée rapidement.',
    equipmentId: 'S-301',
    service: 'Intégrité',
    responsiblePerson: 'Hassan Benjelloun',
    status: 'treated',
    originSource: 'Inspection visuelle',
    createdAt: new Date('2025-01-04T08:15:00'),
    updatedAt: new Date('2025-01-07T17:00:00'),
    fiabiliteIntegriteScore: 1.8,
    disponibiliteScore: 2.8,
    processSafetyScore: 4.8,
    criticalityLevel: 'critical',
    estimatedHours: 32,
    priority: 1,
  },
  {
    id: generateId(),
    title: 'Dégradation isolation thermique IT-205',
    description: 'L\'isolation thermique IT-205 montre des signes de dégradation. Perte d\'efficacité thermique observée.',
    equipmentId: 'IT-205',
    service: 'Maintenance',
    responsiblePerson: 'Youssef Chakir',
    status: 'treated',
    originSource: 'Thermographie',
    createdAt: new Date('2025-01-03T13:30:00'),
    updatedAt: new Date('2025-01-06T09:45:00'),
    fiabiliteIntegriteScore: 2.9,
    disponibiliteScore: 3.5,
    processSafetyScore: 3.4,
    criticalityLevel: 'medium',
    estimatedHours: 8,
    priority: 3,
  },
];

export const mockMaintenanceWindows: MaintenanceWindow[] = [
  {
    id: 'mw-1',
    type: 'minor',
    durationDays: 3,
    startDate: new Date('2025-01-15T06:00:00'),
    endDate: new Date('2025-01-18T06:00:00'),
    description: 'Arrêt mineur - Maintenance préventive secteur A',
    status: 'planned',
  },
  {
    id: 'mw-2',
    type: 'major',
    durationDays: 14,
    startDate: new Date('2025-02-01T06:00:00'),
    endDate: new Date('2025-02-15T06:00:00'),
    description: 'Arrêt majeur - Révision générale',
    status: 'planned',
  },
  {
    id: 'mw-3',
    type: 'force',
    durationDays: 1,
    startDate: new Date('2025-01-13T14:00:00'),
    endDate: new Date('2025-01-14T14:00:00'),
    description: 'Arrêt forcé - Réparation d\'urgence',
    status: 'in_progress',
  },
  {
    id: 'mw-4',
    type: 'minor',
    durationDays: 5,
    startDate: new Date('2025-01-20T06:00:00'),
    endDate: new Date('2025-01-25T06:00:00'),
    description: 'Arrêt mineur - Maintenance secteur B',
    status: 'planned',
  },
  {
    id: 'mw-5',
    type: 'major',
    durationDays: 10,
    startDate: new Date('2025-01-28T06:00:00'),
    endDate: new Date('2025-02-07T06:00:00'),
    description: 'Arrêt majeur - Révision équipements critiques',
    status: 'planned',
  },
  {
    id: 'mw-6',
    type: 'minor',
    durationDays: 3,
    startDate: new Date('2025-02-10T06:00:00'),
    endDate: new Date('2025-02-13T06:00:00'),
    description: 'Arrêt mineur - Maintenance préventive',
    status: 'planned',
  },
];

export const mockDashboardMetrics: DashboardMetrics = {
  totalAnomalies: 847,
  openAnomalies: 156,
  criticalAnomalies: 23,
  averageResolutionTime: 4.2,
  treatmentRate: 84.5,
  safetyIncidents: 2,
  maintenanceWindowUtilization: 76.8,
  costImpact: 2.3,
};

export const mockChartData = {
  anomaliesByMonth: [
    { month: 'Jan', total: 45, critical: 8, high: 12, medium: 15, low: 10 },
    { month: 'Feb', total: 52, critical: 6, high: 14, medium: 18, low: 14 },
    { month: 'Mar', total: 38, critical: 4, high: 10, medium: 12, low: 12 },
    { month: 'Apr', total: 61, critical: 9, high: 16, medium: 20, low: 16 },
    { month: 'May', total: 55, critical: 7, high: 15, medium: 18, low: 15 },
    { month: 'Jun', total: 48, critical: 5, high: 13, medium: 16, low: 14 },
  ],
  
  anomaliesByService: [
    { service: 'Production', count: 156, percentage: 32 },
    { service: 'Maintenance', count: 134, percentage: 28 },
    { service: 'Intégrité', count: 98, percentage: 20 },
    { service: 'Instrumentation', count: 76, percentage: 16 },
    { service: 'Utilités', count: 19, percentage: 4 },
  ],
  
  resolutionTrends: [
    { week: 'S1', resolved: 12, target: 15 },
    { week: 'S2', resolved: 18, target: 15 },
    { week: 'S3', resolved: 14, target: 15 },
    { week: 'S4', resolved: 22, target: 15 },
    { week: 'S5', resolved: 16, target: 15 },
    { week: 'S6', resolved: 19, target: 15 },
  ],
};